<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="rand.api.domain.member.mapper.MemberMapper">


    <select id="emailDuplicateCheck" parameterType="EmailAuthSend" resultType="int">
        /* Membermapper.xml.emailDuplicateCheck 이메일인증코드 발송 전 중복체크 */
        SELECT  COUNT(usr_id)
                FROM MEMBERS
        WHERE email = #{email}
    </select>


    <select id="emailDuplicateCheckInJoinForm" parameterType="Members" resultType="int">
        /* Membermapper.xml.emailDuplicateCheckInJoinForm 회원가입 전  이메일 중복체크 */
        SELECT  COUNT(usr_id)
        FROM MEMBERS
        WHERE email = #{email}
    </select>


    <select id="userNameDuplicateCheck" parameterType="Members" resultType="int">
        /* Membermapper.xml.userNameDuplicateCheck 회원가입 전  아이디 중복체크 */
        SELECT  COUNT(usr_id)
        FROM MEMBERS
        WHERE username = #{username}
    </select>

    <select id="nickNameDuplicateCheck" parameterType="Members" resultType="int">
        /* Membermapper.xml.nickNameDuplicateCheck 회원가입 전  닉네임 중복체크 */
        SELECT  COUNT(usr_id)
        FROM MEMBERS
        WHERE nick_name = #{nickName}
    </select>

    <insert id="join" parameterType="Members">
        /* Membermapper.xml.join 회원가입 */
        INSERT INTO MEMBERS(username,password,email,nick_name,sex,birth)
        VALUES(
               #{username}
              ,#{password}
              ,#{email}
              ,#{nickName}
              ,#{sex}
              ,#{birth}
              )
    </insert>

</mapper>